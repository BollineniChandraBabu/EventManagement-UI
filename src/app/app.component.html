<div class="app-layout" *ngIf="auth.authenticated(); else guestLayout">
  <aside class="side-nav">
    <a class="brand" routerLink="/dashboard">
      <i class="fa-solid fa-wand-magic-sparkles me-2"></i>Family Wishes
    </a>

    <button
      class="navbar-toggler mobile-menu-toggle d-lg-none"
      type="button"
      aria-label="Toggle navigation"
      [attr.aria-expanded]="isMobileMenuOpen"
      (click)="toggleMobileMenu()"
    >
      <i class="fa-solid fa-bars"></i>
    </button>

    <nav class="menu" [class.menu-mobile-open]="isMobileMenuOpen">
      <a routerLink="/dashboard" routerLinkActive="active" (click)="closeMobileMenu()">Dashboard</a>
      <a routerLink="/events" routerLinkActive="active" (click)="closeMobileMenu()">Events</a>
      <a routerLink="/ai-wishes" routerLinkActive="active" (click)="closeMobileMenu()">AI Wishes</a>
      <a routerLink="/email-status" routerLinkActive="active" (click)="closeMobileMenu()">Email Status</a>
      <a *ngIf="auth.isAdmin()" routerLink="/email-status/otp" routerLinkActive="active" (click)="closeMobileMenu()">OTP Emails</a>
      <a *ngIf="auth.isAdmin()" routerLink="/email-status/forgot-password" routerLinkActive="active" (click)="closeMobileMenu()">Forgot Password Emails</a>
      <a *ngIf="auth.isAdmin()" routerLink="/schedulers" routerLinkActive="active" (click)="closeMobileMenu()">Schedulers</a>
      <a *ngIf="auth.isAdmin()" routerLink="/users" routerLinkActive="active" (click)="closeMobileMenu()">Users</a>
      <a *ngIf="auth.isAdmin()" routerLink="/relationship-seeds" routerLinkActive="active" (click)="closeMobileMenu()">Relationship Seeds</a>
      <a *ngIf="auth.isAdmin()" routerLink="/event-type-seeds" routerLinkActive="active" (click)="closeMobileMenu()">Event Type Seeds</a>
      <a routerLink="/account" routerLinkActive="active" (click)="closeMobileMenu()">Account</a>
    </nav>
  </aside>

  <div class="content-shell">
    <main class="app-shell container-fluid py-4">
      <router-outlet></router-outlet>
    </main>

    <footer class="app-footer py-3">
      <div class="container-fluid text-center small">
        Â© {{ currentYear }} All rights reserved. Developed by Chandu.
      </div>
    </footer>
  </div>
</div>

<ng-template #guestLayout>
  <main class="app-shell container py-4">
    <router-outlet></router-outlet>
  </main>
</ng-template>

<app-toast-container></app-toast-container>
<app-loading-overlay></app-loading-overlay>
